## 1-3-2. 데이터 할당

```jsx
var a;
a = 'abc';
var a = 'abc';
```

실제로는 해당 위치에 문자열 ‘abc’를 직접 저장하지는 않습니다. ㄷ에ㅣ터를 저장하기 위한 별도이ㅡ 메모리 공간을 다시 확보해서 문자열 ‘abc’를 저장하고 , 그 주소를 변수 영역에 저장하는 식으로 이뤄집니다. 

이제부터는 데이터의 성질에 따라 ‘변수 영역’, ‘x데이터 영역’으로 구분해서 설명하겠습니다.(정식명칭은 아님)

데이터 할당의 전체 흐름은 다음과 같습니다. 

<aside>

1. 변수 영역에서 빈공간(@1003)을 확보한다.
2. 확보한 공간의 식별자를 a로 지정한다.
3. 데이터 영역의 빈 공간(@5004)에 문자열 ‘abc’를 저장한다.
4. 변수 영역에서 a라는 식별자를 검색한다(@1003)
5. 앞서 저장한 문자열의 주소(@5004)를 @1003의 공간에 대입한다.
</aside>

왜 변수 영역에 값을 직접 대입하지 않고 굳이 번거롭게 한 단계를 더 거치는 걸까요? 이는 데이터 변환을 자유롭게 할 수 잇게 함과 동시에 메모리를 더욱 효율적으로 관리하기 위한 고민의 결과입니다. 

자바 스크립트는 숫자형 데이터에 대해 64비트(8바이트)의 공간을 확보한다고 했습니다. 반면 문자열은 특별히 정해진 규격이 없습니다. 한 글자마다 영어는 1바이트, 한글은 2바이트 등으로 각각 필요한 메모리 용량이 가변적이며 전체 글자 수 역시 가변적이기 때문입니다.

만약 미리 확보한 공간 내에서만 데이터 변환을 할 수 있다면 변호나한 데이터를 다시 저장하기 위해서는 ‘확보된 공간을 변환된 데이터 크기에 맞게 늘리는 작업’이 선행돼야 할 겁니다. 해당 공간이 메모리 상의 가장 마지막에 있었다면 뒤쪽으로 늘리기만 하면 되니까 어렵지 않겠지만 중간에 있는 데이터를 늘려야 하는 상황이라면 어떨까요? 해당 공간보다 뒤에 저장된 데이터들을 전부 뒤로 옮기고 이동시킨 주소를 각 식별자에 다시 연결하는 작업을 해야 합니다. 결국 효율적으로 문자열 데이터의 변환을 처리하려면 변수와 데이터를 별도의 공간에 나누어 저장하는 것이 최적입니다.

문자열 ‘abc’의 마지막에 ‘def’를 추가하라고 하면 컴퓨터는 앞서 ‘abc’가 저장된 공간에 ‘abcdef’를 할당하는 대신 ‘abcdef’라는 문자열을 새로 만들어 별도의 공간에 저장하고 그 주소를 변수 공간에 연결합니다. 반대로 ‘abc’의 마지막 ‘c’를 제거하라고 해도 새로 만듭니다. 기존 문자열에 어던 변환을 가하든 상관 없이 무조건 새로 만들어 별도의 공간에 저장합니다.